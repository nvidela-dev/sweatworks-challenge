<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Solution Diagram — Fitness Member Management</title>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; background: #f8f9fa; color: #1a1a2e; }

    .page {
      width: 1120px;
      margin: 24px auto;
      background: white;
      border-radius: 12px;
      box-shadow: 0 2px 12px rgba(0,0,0,0.08);
      padding: 40px 48px;
    }

    h1 { font-size: 22px; font-weight: 700; margin-bottom: 4px; color: #1a1a2e; }
    .subtitle { font-size: 13px; color: #6b7280; margin-bottom: 32px; }

    .diagram-container {
      position: relative;
      width: 100%;
      margin-bottom: 24px;
    }

    svg { width: 100%; height: 100%; }

    .box { rx: 8; ry: 8; stroke-width: 2; }
    .box-frontend { fill: #eff6ff; stroke: #3b82f6; }
    .box-backend { fill: #f0fdf4; stroke: #22c55e; }
    .box-database { fill: #fefce8; stroke: #eab308; }
    .box-aws { fill: #faf5ff; stroke: #a855f7; }

    .box-label { font-size: 14px; font-weight: 700; fill: #374151; }
    .box-sublabel { font-size: 10.5px; fill: #6b7280; }

    .tech-tag { font-size: 9px; font-weight: 600; fill: white; }
    .tag-bg-blue { fill: #3b82f6; }
    .tag-bg-green { fill: #22c55e; }
    .tag-bg-yellow { fill: #ca8a04; }
    .tag-bg-purple { fill: #a855f7; }
    .tag-bg-cyan { fill: #0ea5e9; }

    .arrow { stroke-width: 2; fill: none; }
    .arrow-data { stroke: #3b82f6; marker-end: url(#arrowhead); }
    .arrow-deploy { stroke: #a855f7; stroke-dasharray: 6,4; marker-end: url(#arrowhead-purple); }

    .arrow-label { font-size: 9.5px; fill: #6b7280; font-style: italic; }

    .region-label { font-size: 10px; font-weight: 700; text-transform: uppercase; letter-spacing: 1.2px; }
    .region-local { fill: #0ea5e9; }
    .region-aws { fill: #a855f7; }

    @media print {
      body { background: white; }
      .page { box-shadow: none; margin: 0; padding: 24px; width: 100%; }
    }
  </style>
</head>
<body>
  <div class="page">
    <h1>Solution Diagram — Fitness Member Management Mini-MVP</h1>
    <p class="subtitle">Local development architecture (Docker Compose) and AWS target deployment</p>

    <div class="diagram-container">
      <svg viewBox="0 0 920 480" xmlns="http://www.w3.org/2000/svg">
        <defs>
          <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
            <polygon points="0 0, 10 3.5, 0 7" fill="#3b82f6" />
          </marker>
          <marker id="arrowhead-purple" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
            <polygon points="0 0, 10 3.5, 0 7" fill="#a855f7" />
          </marker>
        </defs>

        <!-- ===== Region backgrounds ===== -->
        <rect x="8" y="28" width="240" height="440" rx="12" fill="#f8fafc" stroke="#cbd5e1" stroke-width="1" stroke-dasharray="6,3" />
        <rect x="540" y="28" width="372" height="440" rx="12" fill="#faf5ff" stroke="#d8b4fe" stroke-width="1" stroke-dasharray="6,3" />

        <!-- Region labels -->
        <text x="24" y="20" class="region-label region-local">LOCAL (Docker Compose)</text>
        <text x="556" y="20" class="region-label region-aws">AWS TARGET DEPLOYMENT</text>

        <!-- ===== LOCAL SIDE ===== -->

        <!-- Browser -->
        <rect x="28" y="48" width="200" height="68" class="box box-frontend" />
        <text x="128" y="72" text-anchor="middle" class="box-label">Browser</text>
        <text x="128" y="88" text-anchor="middle" class="box-sublabel">User Interface</text>
        <rect x="64" y="98" width="128" height="14" rx="3" class="tag-bg-blue" />
        <text x="128" y="108" text-anchor="middle" class="tech-tag" fill="white">http://localhost:5173</text>

        <!-- Arrow: Browser -> Frontend -->
        <path d="M 128 116 L 128 142" class="arrow arrow-data" />

        <!-- Frontend Container -->
        <rect x="28" y="144" width="200" height="96" class="box box-frontend" />
        <text x="128" y="168" text-anchor="middle" class="box-label">Frontend</text>
        <text x="128" y="184" text-anchor="middle" class="box-sublabel">React 19 + TypeScript</text>
        <text x="128" y="198" text-anchor="middle" class="box-sublabel">Vite 7 + Tailwind CSS 4</text>
        <rect x="48" y="208" width="56" height="16" rx="3" class="tag-bg-cyan" />
        <text x="76" y="219" text-anchor="middle" class="tech-tag" fill="white">Dev: Vite</text>
        <rect x="110" y="208" width="100" height="16" rx="3" class="tag-bg-cyan" />
        <text x="160" y="219" text-anchor="middle" class="tech-tag" fill="white">Prod: nginx</text>

        <!-- Arrow: Frontend -> API -->
        <path d="M 128 240 L 128 270" class="arrow arrow-data" />
        <text x="138" y="259" class="arrow-label">HTTP /api/*</text>

        <!-- API Container -->
        <rect x="28" y="272" width="200" height="96" class="box box-backend" />
        <text x="128" y="296" text-anchor="middle" class="box-label">Backend API</text>
        <text x="128" y="312" text-anchor="middle" class="box-sublabel">Express 4 + TypeScript</text>
        <text x="128" y="326" text-anchor="middle" class="box-sublabel">Drizzle ORM + Zod</text>
        <rect x="48" y="338" width="72" height="16" rx="3" class="tag-bg-green" />
        <text x="84" y="349" text-anchor="middle" class="tech-tag" fill="white">Port 3000</text>
        <rect x="126" y="338" width="84" height="16" rx="3" class="tag-bg-green" />
        <text x="168" y="349" text-anchor="middle" class="tech-tag" fill="white">Swagger UI</text>

        <!-- Arrow: API -> DB -->
        <path d="M 128 368 L 128 398" class="arrow arrow-data" />
        <text x="138" y="387" class="arrow-label">SQL (Drizzle)</text>

        <!-- Database -->
        <rect x="28" y="400" width="200" height="52" class="box box-database" />
        <text x="128" y="422" text-anchor="middle" class="box-label">PostgreSQL 16</text>
        <rect x="56" y="432" width="144" height="14" rx="3" class="tag-bg-yellow" />
        <text x="128" y="442" text-anchor="middle" class="tech-tag" fill="white">Port 5432 + persistent volume</text>

        <!-- ===== DEPLOY ARROWS (clean middle space) ===== -->

        <path d="M 228 188 L 558 100" class="arrow arrow-deploy" />
        <text x="350" y="128" class="arrow-label" fill="#a855f7">Deploy: S3 + invalidation</text>

        <path d="M 228 316 L 558 246" class="arrow arrow-deploy" />
        <text x="340" y="268" class="arrow-label" fill="#a855f7">Deploy: ECR push + ECS update</text>

        <path d="M 228 426 L 558 380" class="arrow arrow-deploy" />
        <text x="340" y="416" class="arrow-label" fill="#a855f7">Migrate: Drizzle Kit → RDS</text>

        <!-- ===== AWS SIDE ===== -->

        <!-- CloudFront + S3 -->
        <rect x="560" y="56" width="200" height="96" class="box box-aws" />
        <text x="660" y="80" text-anchor="middle" class="box-label">CloudFront + S3</text>
        <text x="660" y="96" text-anchor="middle" class="box-sublabel">Static SPA hosting + CDN</text>
        <text x="660" y="112" text-anchor="middle" class="box-sublabel">HTTPS, edge caching</text>
        <rect x="604" y="122" width="112" height="14" rx="3" class="tag-bg-purple" />
        <text x="660" y="132" text-anchor="middle" class="tech-tag" fill="white">React build output</text>

        <!-- Arrow: CloudFront -> ECS -->
        <path d="M 660 152 L 660 192" class="arrow" stroke="#a855f7" style="marker-end: url(#arrowhead-purple)" />
        <text x="670" y="177" class="arrow-label" fill="#a855f7">/api/* origin</text>

        <!-- ECS Fargate -->
        <rect x="560" y="194" width="200" height="100" class="box box-aws" />
        <text x="660" y="220" text-anchor="middle" class="box-label">ECS Fargate</text>
        <text x="660" y="236" text-anchor="middle" class="box-sublabel">Express API containers</text>
        <text x="660" y="252" text-anchor="middle" class="box-sublabel">Auto-scaling, serverless</text>
        <rect x="590" y="264" width="140" height="16" rx="3" class="tag-bg-purple" />
        <text x="660" y="275" text-anchor="middle" class="tech-tag" fill="white">Node 20 + TypeScript</text>

        <!-- Arrow: ECS -> RDS -->
        <path d="M 660 294 L 660 336" class="arrow" stroke="#a855f7" style="marker-end: url(#arrowhead-purple)" />
        <text x="670" y="320" class="arrow-label" fill="#a855f7">Private VPC</text>

        <!-- RDS -->
        <rect x="560" y="338" width="200" height="76" class="box box-aws" />
        <text x="660" y="362" text-anchor="middle" class="box-label">RDS PostgreSQL</text>
        <text x="660" y="378" text-anchor="middle" class="box-sublabel">Managed database</text>
        <text x="660" y="394" text-anchor="middle" class="box-sublabel">Multi-AZ, automated backups</text>

        <!-- Supporting Services -->
        <rect x="790" y="56" width="116" height="358" class="box" fill="#faf5ff" stroke="#d8b4fe" />
        <text x="848" y="80" text-anchor="middle" class="box-label" font-size="11">Supporting</text>
        <text x="848" y="96" text-anchor="middle" class="box-label" font-size="11">Services</text>

        <text x="800" y="124" class="box-sublabel" font-size="10">Route 53</text>
        <text x="800" y="140" class="box-sublabel" font-size="9" fill="#9ca3af">DNS + domain</text>

        <text x="800" y="164" class="box-sublabel" font-size="10">ACM</text>
        <text x="800" y="180" class="box-sublabel" font-size="9" fill="#9ca3af">TLS certificates</text>

        <text x="800" y="204" class="box-sublabel" font-size="10">ECR</text>
        <text x="800" y="220" class="box-sublabel" font-size="9" fill="#9ca3af">Docker registry</text>

        <text x="800" y="244" class="box-sublabel" font-size="10">CloudWatch</text>
        <text x="800" y="260" class="box-sublabel" font-size="9" fill="#9ca3af">Logs + metrics</text>

        <text x="800" y="284" class="box-sublabel" font-size="10">Secrets Manager</text>
        <text x="800" y="300" class="box-sublabel" font-size="9" fill="#9ca3af">DB credentials</text>

        <text x="800" y="324" class="box-sublabel" font-size="10">VPC</text>
        <text x="800" y="340" class="box-sublabel" font-size="9" fill="#9ca3af">Network isolation</text>

        <text x="800" y="364" class="box-sublabel" font-size="10">WAF</text>
        <text x="800" y="380" class="box-sublabel" font-size="9" fill="#9ca3af">Rate limiting</text>

      </svg>
    </div>

    <!-- Legend -->
    <div style="display: flex; gap: 24px; flex-wrap: wrap; font-size: 11px; color: #6b7280; border-top: 1px solid #e5e7eb; padding-top: 12px;">
      <div style="display: flex; align-items: center; gap: 6px;">
        <svg width="24" height="12"><line x1="0" y1="6" x2="24" y2="6" stroke="#3b82f6" stroke-width="2"/></svg>
        <span>Data flow (runtime)</span>
      </div>
      <div style="display: flex; align-items: center; gap: 6px;">
        <svg width="24" height="12"><line x1="0" y1="6" x2="24" y2="6" stroke="#a855f7" stroke-width="2" stroke-dasharray="4,3"/></svg>
        <span>Deployment path</span>
      </div>
      <div style="display: flex; align-items: center; gap: 6px;">
        <svg width="16" height="12"><rect width="16" height="12" rx="2" fill="#eff6ff" stroke="#3b82f6" stroke-width="1.5"/></svg>
        <span>Frontend</span>
      </div>
      <div style="display: flex; align-items: center; gap: 6px;">
        <svg width="16" height="12"><rect width="16" height="12" rx="2" fill="#f0fdf4" stroke="#22c55e" stroke-width="1.5"/></svg>
        <span>Backend</span>
      </div>
      <div style="display: flex; align-items: center; gap: 6px;">
        <svg width="16" height="12"><rect width="16" height="12" rx="2" fill="#fefce8" stroke="#eab308" stroke-width="1.5"/></svg>
        <span>Database</span>
      </div>
      <div style="display: flex; align-items: center; gap: 6px;">
        <svg width="16" height="12"><rect width="16" height="12" rx="2" fill="#faf5ff" stroke="#a855f7" stroke-width="1.5"/></svg>
        <span>AWS Services</span>
      </div>
    </div>
  </div>
</body>
</html>
